(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4379:function(e,t,o){Promise.resolve().then(o.bind(o,6443))},257:function(e,t,o){"use strict";var s,r;e.exports=(null==(s=o.g.process)?void 0:s.env)&&"object"==typeof(null==(r=o.g.process)?void 0:r.env)?o.g.process:o(4227)},4227:function(e){!function(){var t={229:function(e){var t,o,s,r=e.exports={};function a(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{o="function"==typeof clearTimeout?clearTimeout:n}catch(e){o=n}}();var l=[],c=!1,d=-1;function u(){c&&s&&(c=!1,s.length?l=s.concat(l):d=-1,l.length&&p())}function p(){if(!c){var e=i(u);c=!0;for(var t=l.length;t;){for(s=l,l=[];++d<t;)s&&s[d].run();d=-1,t=l.length}s=null,c=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===n||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];l.push(new m(e,t)),1!==l.length||c||i(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},o={};function s(e){var r=o[e];if(void 0!==r)return r.exports;var a=o[e]={exports:{}},n=!0;try{t[e](a,a.exports,s),n=!1}finally{n&&delete o[e]}return a.exports}s.ab="//";var r=s(229);e.exports=r}()},6443:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return n}});var s=o(7437),r=o(2265),a=o(257),n=function(){var e,t,o,n,i,l;let[c,d]=r.useState({drums:null,bass:null,keyboard:null,guitar1:null,guitar2:null,vocalHook:null,synth:null,percussion:null,leadGuitar:null,vocals:null,organ:null,uprightBass:null,piano:null,saxophone:null,trumpet:null,rhodes:null,synthLead:null,pad:null,arp:null,buildNoise:null,vocalChop:null,"808 Bass":null,hiHats:null,kickSnare:null,kick:null,clapHat:null,synthChords:null,leadSynth:null,vocalLoop:null,acousticGuitar:null,electricGuitar:null,banjo:null,fiddle:null,pedalSteel:null,harmonica:null,demboDrums:null,slidingKicks:null,snareHats:null,choirPad:null,fx:null,ambient:null,keys:null}),[u,p]=r.useState({tempo:120,genre:"Pop",songTitle:"",artist:""}),[m,h]=r.useState([{section:"Intro",duration:16,loops:[]},{section:"Verse 1",duration:32,loops:[]},{section:"Chorus",duration:32,loops:[]},{section:"Verse 2",duration:32,loops:[]},{section:"Chorus",duration:32,loops:[]},{section:"Bridge",duration:16,loops:[]},{section:"Chorus",duration:32,loops:[]},{section:"Outro",duration:16,loops:[]}]),[g,x]=r.useState(0),[f,b]=r.useState(!1),[y,v]=r.useState(0),[j,w]=r.useState(0),[k,N]=r.useState({}),[C,S]=r.useState(null),[B,O]=r.useState(null),[L,E]=r.useState(null),[V,T]=r.useState(null),[H,A]=r.useState(!1),[I,D]=r.useState(0),[R,U]=r.useState({}),[P,_]=r.useState({bitDepth:16,sampleRate:44100}),[M,G]=r.useState(null),[z,F]=r.useState(!1),[J,Z]=r.useState(null),[W,K]=r.useState(!1),[q,$]=r.useState(0),[X,{loading:Q}]=function(){let[e,t]=r.useState(!1);return[r.useCallback(async e=>{try{let s;if(t(!0),"reactNativeAsset"in e&&e.reactNativeAsset){if(e.reactNativeAsset.file){let t=new FormData;t.append("file",e.reactNativeAsset.file),s=await fetch("/_create/api/upload/",{method:"POST",body:t})}else{var o;let t=await fetch("/_create/api/upload/presign/",{method:"POST"}),{secureSignature:s,secureExpire:r}=await t.json(),n=await client.uploadFile(e.reactNativeAsset,{fileName:null!==(o=e.reactNativeAsset.name)&&void 0!==o?o:e.reactNativeAsset.uri.split("/").pop(),contentType:e.reactNativeAsset.mimeType,secureSignature:s,secureExpire:r});return{url:"".concat(a.env.EXPO_PUBLIC_BASE_CREATE_USER_CONTENT_URL,"/").concat(n.uuid,"/"),mimeType:n.mimeType||null}}}else if("file"in e&&e.file){let t=new FormData;t.append("file",e.file),s=await fetch("/_create/api/upload/",{method:"POST",body:t})}else s="url"in e?await fetch("/_create/api/upload/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e.url})}):"base64"in e?await fetch("/_create/api/upload/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64:e.base64})}):await fetch("/_create/api/upload/",{method:"POST",headers:{"Content-Type":"application/octet-stream"},body:e.buffer});if(!s.ok){if(413===s.status)throw Error("Upload failed: File too large.");throw Error("Upload failed")}let r=await s.json();return{url:r.url,mimeType:r.mimeType||null}}catch(e){if(e instanceof Error)return{error:e.message};if("string"==typeof e)return{error:e};return{error:"Upload failed"}}finally{t(!1)}},[]),{loading:e}]}(),[Y,ee]=r.useState({dynamic:["drums","bass","keyboard","guitar1","guitar2","vocalHook","synth","percussion","leadGuitar","vocals","organ","uprightBass","piano","saxophone","trumpet","rhodes","synthLead","pad","arp","buildNoise","vocalChop","808Bass","hiHats","kickSnare","kick","clapHat","synthChords","leadSynth","vocalLoop","acousticGuitar","electricGuitar","banjo","fiddle","pedalSteel","harmonica","demboDrums","slidingKicks","snareHats","choirPad","fx","ambient","keys"],custom:[{id:1,name:"Custom 1"},{id:2,name:"Custom 2"},{id:3,name:"Custom 3"},{id:4,name:"Custom 4"},{id:5,name:"Custom 5"},{id:6,name:"Custom 6"},{id:7,name:"Custom 7"},{id:8,name:"Custom 8"}]}),et={Pop:{defaultLoops:["drums","bass","keyboard","guitar1","guitar2","vocals","synth","percussion"],arrangement:{Intro:["drums","keyboard"],"Verse 1":["drums","bass","keyboard"],Chorus:["drums","bass","keyboard","guitar1","vocals"],"Verse 2":["drums","bass","keyboard","guitar2","vocals"],Bridge:["keyboard","synth","vocals"],Outro:["drums","keyboard","vocals"]}},Rock:{defaultLoops:["drums","bass","guitar1","guitar2","leadGuitar","vocals","organ","percussion"],arrangement:{Intro:["drums","guitar1"],"Verse 1":["drums","bass","guitar1"],Chorus:["drums","bass","guitar1","guitar2","vocals"],"Verse 2":["drums","bass","guitar2","vocals"],Bridge:["leadGuitar","organ"],Outro:["drums","guitar1","leadGuitar"]}},"Hip Hop":{defaultLoops:["drums","bass","keys","vocalHook","synth","fx","ambient","percussion"],arrangement:{Intro:["ambient","fx"],"Verse 1":["drums","bass","keys"],Chorus:["drums","bass","synth","vocalHook"],"Verse 2":["drums","bass","keys","percussion"],Bridge:["synth","fx"],Outro:["drums","ambient"]}},"Lo-Fi Hip-Hop":{defaultLoops:["drums","bass","pad","ambient","synth","fx","keys","guitar1"],arrangement:{Intro:["ambient","pad"],"Verse 1":["drums","bass","pad","keys"],Chorus:["drums","bass","pad","guitar1","fx"],"Verse 2":["drums","bass","pad","guitar1","percussion"],Bridge:["ambient","synth"],Outro:["pad","ambient","fx"]}},"Chill Hop":{defaultLoops:["drums","bass","synth","pad","guitar1","ambient","keys","fx"],arrangement:{Intro:["ambient","pad"],"Verse 1":["drums","bass","pad","keys"],Chorus:["drums","bass","pad","guitar1","synth"],"Verse 2":["drums","bass","pad","synth","percussion"],Bridge:["pad","ambient","fx"],Outro:["drums","pad","ambient"]}},Electronic:{defaultLoops:["drums","bass","synthLead","fx","pad","percussion","keys","arp"],arrangement:{Intro:["pad","arp"],"Verse 1":["drums","bass","synthLead"],Chorus:["drums","bass","synthLead","arp","fx"],"Verse 2":["drums","bass","synthLead","percussion"],Bridge:["pad","keys"],Outro:["drums","arp","fx"]}},Jazz:{defaultLoops:["drums","uprightBass","piano","saxophone","trumpet","guitar1","percussion","rhodes"],arrangement:{Intro:["rhodes","uprightBass"],"Verse 1":["drums","uprightBass","piano"],Chorus:["drums","uprightBass","saxophone","trumpet"],"Verse 2":["drums","uprightBass","guitar1","piano"],Bridge:["saxophone","trumpet","percussion"],Outro:["uprightBass","rhodes"]}},Blues:{defaultLoops:["drums","bass","guitar1","guitar2","organ","harmonica","vocals","percussion"],arrangement:{Intro:["guitar1","organ"],"Verse 1":["drums","bass","guitar1"],Chorus:["drums","bass","guitar1","vocals"],"Verse 2":["drums","bass","guitar2","harmonica"],Bridge:["organ","guitar2","vocals"],Outro:["guitar1","harmonica"]}},Country:{defaultLoops:["drums","bass","acousticGuitar","electricGuitar","banjo","fiddle","vocals","pedalSteel"],arrangement:{Intro:["acousticGuitar","pedalSteel"],"Verse 1":["drums","bass","acousticGuitar"],Chorus:["drums","bass","electricGuitar","vocals","fiddle"],"Verse 2":["drums","bass","banjo","electricGuitar"],Bridge:["fiddle","pedalSteel"],Outro:["acousticGuitar","vocals"]}},"R&B":{defaultLoops:["drums","bass","keys","vocals","pad","guitar1","fx","synth"],arrangement:{Intro:["pad","keys"],"Verse 1":["drums","bass","keys"],Chorus:["drums","bass","keys","vocals","synth"],"Verse 2":["drums","bass","guitar1","pad"],Bridge:["keys","vocals","fx"],Outro:["pad","vocals"]}},Reggaeton:{defaultLoops:["demboDrums","bass","keys","guitar1","vocalHook","synth","fx","percussion"],arrangement:{Intro:["demboDrums","fx"],"Verse 1":["demboDrums","bass","keys","percussion"],Chorus:["demboDrums","bass","synth","vocalHook","percussion"],"Verse 2":["demboDrums","bass","guitar1","percussion"],Bridge:["synth","vocalHook"],Outro:["demboDrums","keys","fx"]}},Trap:{defaultLoops:["808Bass","hiHats","kickSnare","synthLead","fx","vocalChop","pad","arp"],arrangement:{Intro:["pad","fx"],"Verse 1":["kickSnare","808Bass","synthLead"],Chorus:["kickSnare","808Bass","synthLead","vocalChop"],"Verse 2":["kickSnare","808Bass","arp","hiHats"],Bridge:["pad","fx"],Outro:["808Bass","kickSnare","pad"]}},House:{defaultLoops:["kick","bass","clapHat","synthChords","leadSynth","fx","vocalLoop","percussion"],arrangement:{Intro:["kick","fx"],"Verse 1":["kick","bass","synthChords"],Chorus:["kick","bass","leadSynth","vocalLoop"],"Verse 2":["kick","bass","synthChords","percussion"],Bridge:["synthChords","fx"],Outro:["kick","leadSynth"]}},Afrobeats:{defaultLoops:["kickSnare","percussion","bass","guitar1","vocalHook","synth","pad","fx"],arrangement:{Intro:["percussion","pad"],"Verse 1":["kickSnare","bass","guitar1"],Chorus:["kickSnare","bass","synth","vocalHook"],"Verse 2":["kickSnare","bass","guitar1","pad"],Bridge:["percussion","vocalHook","synth"],Outro:["kickSnare","pad","fx"]}},Drill:{defaultLoops:["808Bass","slidingKicks","snareHats","vocalChop","fx","choirPad","leadSynth","percussion"],arrangement:{Intro:["choirPad","fx"],"Verse 1":["slidingKicks","808Bass","leadSynth"],Chorus:["snareHats","808Bass","leadSynth","vocalChop"],"Verse 2":["slidingKicks","808Bass","leadSynth","percussion"],Bridge:["choirPad","vocalChop"],Outro:["808Bass","fx","choirPad"]}},EDM:{defaultLoops:["drums","bass","synthLead","fx","buildNoise","pad","vocalChop","percussion"],arrangement:{Intro:["pad","fx"],"Verse 1":["drums","bass","synthLead"],Chorus:["drums","bass","synthLead","vocalChop"],"Verse 2":["drums","bass","synthLead","percussion"],Bridge:["buildNoise","synthLead","vocalChop"],Outro:["pad","bass","fx"]}}};r.useEffect(()=>{if("function"!=typeof window.JSZip){let e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js",e.async=!0,document.head.appendChild(e)}},[]);let[eo,es]=r.useState(null);r.useEffect(()=>{if(window.JSZip)es(window.JSZip);else{let e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js",e.async=!0,e.onload=()=>{window.JSZip&&es(window.JSZip)},document.head.appendChild(e)}},[]);let er=(e,t)=>Math.round(t/60*e/4),ea=(e,t)=>4*e/(t/60),en=e=>e<=6?4:e<=12?8:16,ei=()=>m.reduce((e,t)=>e+er(t.duration,u.tempo),0),el=()=>m.reduce((e,t)=>e+t.duration,0);r.useEffect(()=>{h(m.map(e=>{let t=en(er(e.duration,u.tempo));return{...e,duration:ea(t,u.tempo)}}))},[u.tempo]),r.useEffect(()=>{let e={};Object.keys(c).forEach(t=>{if(c[t]){let o=new Audio(c[t].url);o.loop=!0,o.volume=.7,o.preload="auto",e[t]=o}}),N(e)},[c]);let ec=async e=>{try{let t=await fetch(e),o=await t.arrayBuffer(),s=new(window.AudioContext||window.webkitAudioContext);return await s.decodeAudioData(o)}catch(e){return console.error("Error loading audio buffer:",e),null}};r.useEffect(()=>{(async()=>{let e={};for(let[t,o]of Object.entries(c))if(o&&o.url){let s=await ec(o.url);s&&(e[t]=s)}U(e)})()},[c]);let ed=e=>{d(t=>{var o;let s={...t};return(null===(o=s[e])||void 0===o?void 0:o.url)&&URL.revokeObjectURL(s[e].url),delete s[e],s})},eu=()=>{let{artist:e,songTitle:t,tempo:o}=u;return[e||"Unknown Artist",t||"Untitled","".concat(o,"bpm")].join(" - ")},ep=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,o=e.length,s=e.numberOfChannels,r=e.sampleRate,a=t/8,n=new ArrayBuffer(44+o*s*a),i=new DataView(n),l=(e,t)=>{for(let o=0;o<t.length;o++)i.setUint8(e+o,t.charCodeAt(o))};l(0,"RIFF"),i.setUint32(4,36+o*s*a,!0),l(8,"WAVE"),l(12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,s,!0),i.setUint32(24,r,!0),i.setUint32(28,r*s*a,!0),i.setUint16(32,s*a,!0),i.setUint16(34,t,!0),l(36,"data"),i.setUint32(40,o*s*a,!0);let c=44;for(let r=0;r<o;r++)for(let o=0;o<s;o++){let s=Math.max(-1,Math.min(1,e.getChannelData(o)[r]));if(16===t)i.setInt16(c,32767*s,!0),c+=2;else if(24===t){let e=Math.round(8388607*s);i.setUint8(c,255&e),i.setUint8(c+1,e>>8&255),i.setUint8(c+2,e>>16&255),c+=3}}return new Blob([n],{type:"audio/wav"})},em=async()=>{if(0===Object.keys(R).length){alert("No audio loops loaded for export");return}A(!0),D(0);try{let e=el(),t=P.sampleRate,o=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(2,Math.ceil(e*t),t),s=0;for(let e=0;e<m.length;e++){let r=m[e];D(e/m.length*50);let a=ea(8,u.tempo);for(let e of r.loops){let r=R[e.type];if(!r)continue;let n=r.duration,i=Math.ceil(a/n);for(let e=0;e<i;e++){let i=o.createBufferSource();i.buffer=r;let l=o.createGain();l.gain.value=.7,i.connect(l),l.connect(o.destination);let c=Math.floor(s*t)/t;if(i.start(c),(e+1)*n>a){let t=c+a-e*n;i.stop(t)}}}s+=a}D(75);let r=await o.startRendering();D(90);let a=ep(r,P.bitDepth),n="".concat(eu(),".wav"),i=URL.createObjectURL(a),l=document.createElement("a");l.href=i,l.download=n,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i),D(100),setTimeout(()=>{A(!1),D(0)},1e3)}catch(e){console.error("Export error:",e),alert("Export failed: "+e.message),A(!1),D(0)}},eh=async()=>{if(0===Object.keys(R).length){alert("No audio loops loaded for export");return}K(!0),$(0);try{let t=el(),o=P.sampleRate,s=Math.ceil(t*o),r=new Set;m.forEach(e=>{e.loops.forEach(e=>{r.add(e.type)})});let a=[],n=0,i=r.size;for(let t of r){var e;let r=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(2,s,o),l=0;for(let e=0;e<m.length;e++){let s=m[e].loops.some(e=>e.type===t),a=ea(8,u.tempo);if(s){let e=R[t];if(!e)continue;let s=e.duration,n=Math.ceil(a/s);for(let t=0;t<n;t++){let n=r.createBufferSource();n.buffer=e;let i=r.createGain();i.gain.value=.7,n.connect(i),i.connect(r.destination);let c=Math.floor(l*o)/o;if(n.start(c),(t+1)*s>a){let e=c+a-t*s;n.stop(e)}}}l+=a}let d=await r.startRendering(),p=ep(d,P.bitDepth),h=(null===(e=c[t])||void 0===e?void 0:e.name)||t,g="".concat(eu()," - ").concat(h,".wav");a.push({name:g,blob:p}),n++,$(n/i*100)}let l=new JSZip;a.forEach(e=>{l.file(e.name,e.blob)});let d=await l.generateAsync({type:"blob"}),p=URL.createObjectURL(d),h=document.createElement("a");h.href=p,h.download="".concat(eu()," - Stems.zip"),document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(p),setTimeout(()=>{K(!1),$(0)},1e3)}catch(e){console.error("Stem export error:",e),alert("Stem export failed: "+e.message),K(!1),$(0)}},eg=()=>{b(!1),Object.values(k).forEach(e=>{e.pause(),e.currentTime=0}),w(0)},ex=async()=>{let e=m[y];if(console.log("Playing section ".concat(y,": ").concat(null==e?void 0:e.section)),!e){console.log("No section found, stopping playback"),eg(),v(0);return}if(0===e.loops.length){console.log("Section ".concat(e.section," has no loops, playing silent section for ").concat(e.duration,"s"));let t=1e3*e.duration,o=Date.now(),s=()=>{if(!f)return;let e=Date.now()-o;if(w(Math.min(e/t*100,100)),e>=t){let e=y+1;e<m.length?(console.log("Moving to next section: ".concat(e)),v(e),w(0)):(console.log("End of song reached"),eg(),v(0))}else requestAnimationFrame(s)};requestAnimationFrame(s);return}Object.values(k).forEach(e=>{e.pause(),e.currentTime=0}),console.log("Playing ".concat(e.loops.length," loops for section ").concat(e.section));let t=e.loops.map(async e=>{let t=k[e.type];if(t)try{t.currentTime=0,await t.play(),console.log("Started playing ".concat(e.type))}catch(t){console.error("Error playing ".concat(e.type,":"),t)}else console.warn("No audio element found for ".concat(e.type))});await Promise.all(t);let o=1e3*e.duration,s=Date.now(),r=()=>{if(!f)return;let t=Date.now()-s;if(w(Math.min(t/o*100,100)),t>=o){let t=y+1;t<m.length?(console.log("Section ".concat(e.section," completed, moving to section ").concat(t)),v(t),w(0)):(console.log("Song completed"),eg(),v(0))}else requestAnimationFrame(r)};requestAnimationFrame(r)};r.useEffect(()=>{if(f&&y<m.length){let e=setTimeout(()=>{ex()},100);return()=>clearTimeout(e)}},[y,f]);let ef=async(e,t)=>{let o=e.target.files[0];if(!o)return;let s=URL.createObjectURL(o);d(e=>({...e,[t]:{name:o.name,url:s,type:t,file:o}}))};r.useEffect(()=>()=>{Object.values(c).forEach(e=>{(null==e?void 0:e.url)&&URL.revokeObjectURL(e.url)})},[]);let eb=e=>{if(!c[e])return;let t=[...m],o=t[g];o.loops.find(t=>t.type===e)||o.loops.push({type:e,name:c[e].name,url:c[e].url}),h(t)},ey=e=>{let t=[...m],o=t[g];o.loops=o.loops.filter(t=>t.type!==e),h(t)},ev=(e,t)=>{let o=[...m],s=ea(parseInt(t),u.tempo);o[e].duration=s,h(o)},ej=async e=>{if(B&&(B.pause(),B.currentTime=0),f&&eg(),null!==V&&eN(),L===e){E(null),O(null);return}let t=c[e];if(t)try{let o=new Audio(t.url);o.loop=!0,o.volume=.8,o.addEventListener("ended",()=>{E(null),O(null)}),await o.play(),O(o),E(e)}catch(e){console.error("Preview playback error:",e)}},ew=()=>{B&&(B.pause(),B.currentTime=0,O(null),E(null))},ek=async e=>{if(f&&eg(),B&&ew(),V===e){eN();return}let t=m[e];if(!t||0===t.loops.length){console.log("No loops in this section to preview");return}try{T(e),Object.values(k).forEach(e=>{e.pause(),e.currentTime=0});let o=t.loops.map(async e=>{let t=k[e.type];if(t)try{t.currentTime=0,t.loop=!0,await t.play()}catch(t){console.error("Error previewing ".concat(e.type,":"),t)}});await Promise.all(o)}catch(e){console.error("Section preview error:",e),T(null)}},eN=()=>{Object.values(k).forEach(e=>{e.pause(),e.currentTime=0}),T(null)},eC=(e,t)=>{ee(o=>({...o,custom:o.custom.map(o=>o.id===e?{...o,name:t}:o)}))};r.useEffect(()=>{let e=u.genre;et[e]&&ee(t=>({dynamic:et[e].defaultLoops,custom:t.custom}))},[u.genre]),r.useEffect(()=>{let e={Pop:[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Verse 1",duration:ea(8,u.tempo),loops:[]},{section:"Chorus 1",duration:ea(8,u.tempo),loops:[]},{section:"Verse 2",duration:ea(8,u.tempo),loops:[]},{section:"Chorus 2",duration:ea(8,u.tempo),loops:[]},{section:"Bridge",duration:ea(8,u.tempo),loops:[]},{section:"Chorus 3",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],Rock:[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Solo",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],"Hip Hop":[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Verse 1",duration:ea(8,u.tempo),loops:[]},{section:"Hook",duration:ea(8,u.tempo),loops:[]},{section:"Verse 2",duration:ea(8,u.tempo),loops:[]},{section:"Hook",duration:ea(8,u.tempo),loops:[]},{section:"Break",duration:ea(8,u.tempo),loops:[]},{section:"Hook",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],"Lo-Fi Hip-Hop":[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Bridge",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],"Chill Hop":[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Bridge",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],Electronic:[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Build",duration:ea(8,u.tempo),loops:[]},{section:"Drop",duration:ea(8,u.tempo),loops:[]},{section:"Breakdown",duration:ea(8,u.tempo),loops:[]},{section:"Build",duration:ea(8,u.tempo),loops:[]},{section:"Drop",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],Jazz:[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Head",duration:ea(8,u.tempo),loops:[]},{section:"Solo 1",duration:ea(8,u.tempo),loops:[]},{section:"Solo 2",duration:ea(8,u.tempo),loops:[]},{section:"Head (Reprise)",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],Blues:[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Solo",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],Country:[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Verse 1",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Verse 2",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Bridge",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],"R&B":[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Verse 1",duration:ea(8,u.tempo),loops:[]},{section:"Pre-Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Verse 2",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Bridge",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],Reggaeton:[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Verse 1",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Verse 2",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Bridge",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],Trap:[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Hook",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Hook",duration:ea(8,u.tempo),loops:[]},{section:"Breakdown",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Hook",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],House:[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Groove",duration:ea(8,u.tempo),loops:[]},{section:"Break",duration:ea(8,u.tempo),loops:[]},{section:"Drop",duration:ea(8,u.tempo),loops:[]},{section:"Build",duration:ea(8,u.tempo),loops:[]},{section:"Drop",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],Afrobeats:[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Verse",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Break",duration:ea(8,u.tempo),loops:[]},{section:"Chorus",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],Drill:[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Verse 1",duration:ea(8,u.tempo),loops:[]},{section:"Hook",duration:ea(8,u.tempo),loops:[]},{section:"Verse 2",duration:ea(8,u.tempo),loops:[]},{section:"Hook",duration:ea(8,u.tempo),loops:[]},{section:"Breakdown",duration:ea(8,u.tempo),loops:[]},{section:"Hook",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}],EDM:[{section:"Intro",duration:ea(8,u.tempo),loops:[]},{section:"Build",duration:ea(8,u.tempo),loops:[]},{section:"Drop",duration:ea(8,u.tempo),loops:[]},{section:"Break",duration:ea(8,u.tempo),loops:[]},{section:"Build",duration:ea(8,u.tempo),loops:[]},{section:"Drop",duration:ea(8,u.tempo),loops:[]},{section:"Outro",duration:ea(8,u.tempo),loops:[]}]},t=u.genre;e[t]&&h(e[t])},[u.genre,u.tempo]);let eS=(e,t)=>{let o=[...m],[s]=o.splice(e,1);o.splice(t,0,s),h(o)},eB=e=>{let t=[...m];t.splice(e,1),h(t),g>=t.length&&x(Math.max(0,t.length-1))},eO=(e,t)=>{let o=[...m];o[e].section=t,h(o)};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col mb-8",children:[(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:"https://ucarecdn.com/2499c74f-55f8-497c-8c7f-572ffbe0c55d/-/format/auto/",alt:"WaterSpoon Logo",className:"h-12"})}),(0,s.jsx)("div",{className:"flex justify-center mt-4",children:(0,s.jsx)("img",{src:"https://ucarecdn.com/85cacbe2-4c87-444f-ac61-b54836c10d5d/-/format/auto/",alt:"Bartender Logo",className:"h-32"})})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-blue-400",children:"Song Settings"}),(0,s.jsx)("div",{className:"text-sm text-yellow-400 mb-4",children:"⚠️ Important: Set your tempo before uploading any loops to ensure proper playback and export"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Song Title"}),(0,s.jsx)("input",{type:"text",value:u.songTitle,onChange:e=>p(t=>({...t,songTitle:e.target.value})),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"Enter song title"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Artist"}),(0,s.jsx)("input",{type:"text",value:u.artist,onChange:e=>p(t=>({...t,artist:e.target.value})),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"Enter artist name"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Tempo (BPM)"}),(0,s.jsx)("input",{type:"number",value:u.tempo,onChange:e=>p(t=>({...t,tempo:parseInt(e.target.value)})),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",min:"60",max:"200"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Genre"}),(0,s.jsx)("select",{value:u.genre,onChange:e=>p(t=>({...t,genre:e.target.value})),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:["Pop","Rock","Hip Hop","Lo-Fi Hip-Hop","Chill Hop","Electronic","Jazz","Blues","Country","R&B","Reggaeton","Trap","House","Afrobeats","Drill","EDM"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["Current arrangement: ",ei()," bars (",Math.floor(el()/60),":",String(Math.floor(el()%60)).padStart(2,"0"),")"]})})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-green-400",children:"Import Loops (8 bars each)"}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-3 text-blue-400",children:"Genre Loops"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Y.dynamic.map(e=>(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"font-medium mb-2 capitalize",children:e.replace(/([A-Z])/g," $1")}),(0,s.jsx)("input",{type:"file",accept:"audio/*",onChange:t=>ef(t,e),className:"w-full text-xs mb-2"}),c[e]&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"text-xs text-green-400 truncate",children:["✓ ",c[e].name]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>ej(e),className:"flex-1 px-2 py-1 rounded text-xs font-medium transition-colors ".concat(L===e?"bg-red-500 hover:bg-red-400 text-white":"bg-blue-600 hover:bg-blue-500 text-white"),children:L===e?"⏸ Stop":"▶ Preview"}),(0,s.jsx)("button",{onClick:()=>ed(e),className:"px-2 py-1 rounded text-xs font-medium bg-red-600 hover:bg-red-500 text-white transition-colors",children:"✕"})]})]})]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-3 text-purple-400",children:"Custom Loops"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Y.custom.map(e=>(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,s.jsx)("input",{type:"text",value:e.name,onChange:t=>eC(e.id,t.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-2 py-1 text-white text-sm mb-2",placeholder:"Custom Loop Name"}),(0,s.jsx)("input",{type:"file",accept:"audio/*",onChange:t=>ef(t,"custom_".concat(e.id)),className:"w-full text-xs mb-2"}),c["custom_".concat(e.id)]&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"text-xs text-green-400 truncate",children:["✓ ",c["custom_".concat(e.id)].name]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>ej("custom_".concat(e.id)),className:"flex-1 px-2 py-1 rounded text-xs font-medium transition-colors ".concat(L==="custom_".concat(e.id)?"bg-red-500 hover:bg-red-400 text-white":"bg-blue-500 hover:bg-blue-400 text-white"),children:L==="custom_".concat(e.id)?"⏸ Stop":"▶ Preview"}),(0,s.jsx)("button",{onClick:()=>ed("custom_".concat(e.id)),className:"px-2 py-1 rounded text-xs font-medium bg-red-600 hover:bg-red-500 text-white transition-colors",children:"✕"})]})]})]},e.id))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-yellow-400",children:"Song Structure"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{let e=Object.keys(c).filter(e=>c[e]);if(0===e.length)return;let t=[...m],o=et[u.genre]||et.Pop;t.forEach(t=>{let s=o.arrangement[t.section]||o.arrangement[Object.keys(o.arrangement)[0]];t.loops=[],s.forEach(o=>{e.includes(o)&&t.loops.push({type:o,name:c[o].name,url:c[o].url})})}),h(t)},className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"\uD83C\uDFB5 Auto-Fill"}),(0,s.jsx)("button",{onClick:()=>{h([...m,{section:"New Section",duration:ea(8,u.tempo),loops:[]}])},className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"+ Add Section"})]})]}),(0,s.jsx)("div",{className:"space-y-2",children:m.map((e,t)=>{let o=er(e.duration,u.tempo);return(0,s.jsxs)("div",{className:"p-3 rounded transition-colors relative ".concat(g===t?"bg-purple-600":y===t&&f?"bg-green-600":V===t?"bg-blue-600":"bg-gray-700 hover:bg-gray-600"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("button",{onClick:()=>t>0&&eS(t,t-1),disabled:0===t,className:"px-2 text-xs ".concat(0===t?"text-gray-500":"hover:text-white"),children:"▲"}),(0,s.jsx)("button",{onClick:()=>t<m.length-1&&eS(t,t+1),disabled:t===m.length-1,className:"px-2 text-xs ".concat(t===m.length-1?"text-gray-500":"hover:text-white"),children:"▼"})]}),(0,s.jsx)("input",{type:"text",value:e.section,onChange:e=>eO(t,e.target.value),onClick:e=>{e.stopPropagation(),x(t)},className:"bg-transparent border-none font-medium focus:outline-none focus:ring-1 focus:ring-white rounded px-1"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-400",children:[o," bars"]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[e.loops.length>0&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),ek(t)},className:"px-2 py-1 rounded text-xs font-medium transition-colors ".concat(V===t?"bg-red-500 hover:bg-red-400 text-white":"bg-blue-500 hover:bg-blue-400 text-white"),children:V===t?"⏸":"▶"}),(0,s.jsx)("button",{onClick:()=>x(t),className:"px-2 py-1 rounded text-xs font-medium bg-purple-500 hover:bg-purple-400 text-white transition-colors",children:"Edit"}),m.length>1&&(0,s.jsx)("button",{onClick:()=>eB(t),className:"px-2 py-1 rounded text-xs font-medium bg-red-600 hover:bg-red-500 text-white transition-colors",children:"✕"})]})]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400 mt-1 ml-8",children:[e.loops.length," loops"]}),y===t&&f&&(0,s.jsx)("div",{className:"absolute bottom-0 left-0 h-1 bg-white transition-all duration-100",style:{width:"".concat(j,"%")}})]},t)})}),null!==V&&(0,s.jsxs)("div",{className:"mt-4 text-sm text-blue-400",children:["\uD83C\uDFB5 Previewing: ",null===(e=m[V])||void 0===e?void 0:e.section]})]})}),(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h2",{className:"text-2xl font-semibold text-orange-400",children:["Edit: ",null===(t=m[g])||void 0===t?void 0:t.section]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("label",{className:"text-sm",children:"Bars:"}),(0,s.jsxs)("select",{value:er((null===(o=m[g])||void 0===o?void 0:o.duration)||0,u.tempo),onChange:e=>ev(g,e.target.value),className:"bg-gray-700 border border-gray-500 rounded px-2 py-1 text-white text-sm",children:[(0,s.jsx)("option",{value:4,children:"4"}),(0,s.jsx)("option",{value:8,children:"8"}),(0,s.jsx)("option",{value:16,children:"16"})]}),(0,s.jsxs)("span",{className:"text-sm text-gray-400",children:["bars (",Math.round((null===(n=m[g])||void 0===n?void 0:n.duration)||0),"s)"]})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Available Loops"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[Y.dynamic.map(e=>(0,s.jsxs)("button",{onClick:()=>eb(e),disabled:!c[e],className:"p-2 rounded text-sm transition-colors ".concat(c[e]?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:["+ ",e.replace(/([A-Z])/g," $1")]},e)),Y.custom.map(e=>(0,s.jsxs)("button",{onClick:()=>eb("custom_".concat(e.id)),disabled:!c["custom_".concat(e.id)],className:"p-2 rounded text-sm transition-colors ".concat(c["custom_".concat(e.id)]?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:["+ ",e.name]},"custom_".concat(e.id)))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Loops in this Section"}),(null===(i=m[g])||void 0===i?void 0:i.loops.length)===0?(0,s.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No loops added to this section yet"}):(0,s.jsx)("div",{className:"space-y-2",children:null===(l=m[g])||void 0===l?void 0:l.loops.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium capitalize",children:e.type.replace(/([A-Z])/g," $1")}),(0,s.jsx)("div",{className:"text-sm text-gray-400 truncate",children:e.name})]}),(0,s.jsx)("button",{onClick:()=>ey(e.type),className:"bg-red-600 hover:bg-red-500 text-white px-3 py-1 rounded text-sm",children:"Remove"})]},t))})]})]})})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mt-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-red-400",children:"Export"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-6 shadow-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-medium text-blue-400",children:"WAV Export"}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:[ei()," bars • ",Math.floor(el()/60),":",String(Math.floor(el()%60)).padStart(2,"0")]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Sample Rate"}),(0,s.jsxs)("select",{value:P.sampleRate,onChange:e=>_(t=>({...t,sampleRate:parseInt(e.target.value)})),className:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"44100",children:"44.1 kHz"}),(0,s.jsx)("option",{value:"48000",children:"48 kHz"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Bit Depth"}),(0,s.jsxs)("select",{value:P.bitDepth,onChange:e=>_(t=>({...t,bitDepth:parseInt(e.target.value)})),className:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"16",children:"16-bit"}),(0,s.jsx)("option",{value:"24",children:"24-bit"})]})]})]}),(0,s.jsx)("button",{onClick:em,disabled:H,className:"w-full bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium transition-colors shadow-md",children:H?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting... ",I,"%"]}):"Export WAV"})]})]}),(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-6 shadow-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-medium text-purple-400",children:"Stem Export"}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:[Object.keys(R).length," loops"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-300",children:"Export each loop as a separate WAV file, perfectly aligned to the arrangement grid. All stems will be packaged in a ZIP archive."}),(0,s.jsx)("button",{onClick:eh,disabled:W,className:"w-full bg-purple-600 hover:bg-purple-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium transition-colors shadow-md",children:W?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting Stems... ",q,"%"]}):"Export Stems"})]})]})]})]})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=4379)}),_N_E=e.O()}]);